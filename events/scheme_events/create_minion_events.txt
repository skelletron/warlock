namespace = create_minion

create_minion.1001 = {
	type = character_event
	title = create_minion.1001.t
	desc = create_minion.1001.desc
	theme = minion

	left_portrait = {
		character = root
		animation = angry
	}

	right_portrait = {
		character = scope:target
		animation = shock
	}

	# immediate = {
		
	# }
	option = {
		name = create_minion.1001.a
		custom_tooltip = create_minion.1001.a.tt

		# hidden_effect = {
			random_list = {
				100 = {

					# Negative Modifiers

					# Ruler
					modifier = {
						scope:target = {
							is_ruler = yes
						}
						add = -20
					}
					# Has Empire
					modifier = {
						scope:target = {
							highest_held_title_tier = tier_empire
						}
						add = -75
					}
					# Has Kingdom
					modifier = {
						scope:target = {
							highest_held_title_tier = tier_kingdom
						}
						add = -70
					}
					# Has Duchy
					modifier = {
						scope:target = {
							highest_held_title_tier = tier_duchy
						}
						add = -50
					}
					# Has County
					modifier = {
						scope:target = {
							highest_held_title_tier = tier_count
						}
						add = -30
					}
					# Has Barony
					modifier = {
						scope:target = {
							highest_held_title_tier = tier_barony
						}
						add = -10
					}

					# Spouse of Ruler
					modifier = {
						scope:target = {
							is_landed = no
							exists = primary_spouse
							primary_spouse = { is_landed = yes }

							# primary_spouse.highest_held_title_tier = tier_empire
						}
						add = -10
					}
					# Spouse has Empire
					modifier = {
						scope:target = {
							is_landed = no
							exists = primary_spouse
							primary_spouse = { is_landed = yes }
							primary_spouse.highest_held_title_tier = tier_empire
						}
						add = -40
					}
					# Spouse has Kingdom
					modifier = {
						scope:target = {
							is_landed = no
							exists = primary_spouse
							primary_spouse = { is_landed = yes }
							primary_spouse.highest_held_title_tier = tier_kingdom
						}
						add = -35
					}
					# Spouse has Duchy
					modifier = {
						scope:target = {
							is_landed = no
							exists = primary_spouse
							primary_spouse = { is_landed = yes }
							primary_spouse.highest_held_title_tier = tier_duchy
						}
						add = -25
					}
					# Spouse has County
					modifier = {
						scope:target = {
							is_landed = no
							exists = primary_spouse
							primary_spouse = { is_landed = yes }
							primary_spouse.highest_held_title_tier = tier_county
						}
						add = -15
					}
					# Spouse has Barony
					modifier = {
						scope:target = {
							is_landed = no
							exists = primary_spouse
							primary_spouse = { is_landed = yes }
							primary_spouse.highest_held_title_tier = tier_barony
						}
						add = -5
					}

					# Positive Modifiers

					# Intrigue
					modifier = {
						scope:owner.intrigue > scope:target.intrigue
						add = 15
					}
					# Learning
					modifier = {
						scope:owner.learning > scope:target.learning
						add = 15
					}

					scope:target = {
						add_trait = undead
						add_trait = deathknight
		
						if = {
							limit = {
								is_ruler = yes
							}
							depose = yes
						}
		
						if = {
							limit = {
								NOT = {
									faith = faith:great_old_one
								}
							}
							set_character_faith = faith:great_old_one
						}
		
						# faith = faith:great_old_one
		
						add_opinion = {
							modifier = deathknight_opinion_modifier
							target = scope:owner
						}
		
						# set_variable = {
						# 	name = age_aquired_immortality
						# 	value = age
						# }
					}
					scope:owner = {
						add_courtier = scope:target
					}
				}
	
				# Failure
				100 = {
	
				}
			}
		# }




		scope:scheme = {
			end_scheme = yes
		}
	}

	option = {
		name = create_minion.1001.b
		custom_tooltip = create_minion.1001.b.tt

		scope:scheme = {
			end_scheme = yes
		}
	}
}
